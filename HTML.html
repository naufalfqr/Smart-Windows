<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="bootstrap/js/jquery-1.12.4.js"></script>
    <script src="bootstrap/js/mqttws31.js"></script>
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>ESP8266 WebIface</title>
    <!-- Bootstrap -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="bootstrap/css/bootstrap-toggle.min.css" rel="stylesheet">
    <link href="bootstrap/css/bootstrap-slider.min.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="<a href="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js">https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js</a>"></script>
      <script src="<a href="https://oss.maxcdn.com/respond/1.4.2/respond.min.js">https://oss.maxcdn.com/respond/1.4.2/respond.min.js</a>"></script>
    <![endif]-->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript">
        //script untuk mendapatkan data dari Node JS
		$(document).ready(function(){
			setInterval(function(){
				$.ajax({
					url: 'http://localhost:3000/',
					dataType: 'json',
					success:function(data){
						console.log(data);
						$("#data-temp").text(data.temp); //sesuaikan variabel dengan antares
						$("#data-hum").text(data.hum); //sesuaikan variabel dengan antares
						$("#data-chy").text(data.chy); //sesuaikan variabel dengan antares
						$("#status").text("Connected"); //sesuaikan variabel dengan antares
					},
					error:function(data){
						$("#data-temp").text("Loading..."); //sesuaikan variabel dengan antares
						$("#data-hum").text("Loading..."); //sesuaikan variabel dengan antares
						$("#data-chy").text("Loading..."); //sesuaikan variabel dengan antares
						$("#status").text("Not Connected"); //sesuaikan variabel dengan antares
					}
				});
			},1000)
		});
    </script>
    <style type="text/css">
        .slider.slider-horizontal {
            width: 100%;
            height: 20px;
        }
        .text-bold {
            font-weight: bold;
        }
    </style>
  </head>
  <body>
    <div class="container">
        <div class="row">
            <div class="col-sm-12 text-center">
                <h1>Smart Windows</h1>
                <hr>
                <div class="panel panel-primary">
                    <div class="panel-heading"> <h3 class="panel-title text-bold"><span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span> Temperatur</h3></div>
                    <div class="panel-body">
                        <div class="progress">
                          <div id="pgbar-sensor" class="progress-bar progress-bar-danger progress-bar-striped active" role="progressbar"
                          aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%">
                          <h1>Temperatur : <span id="data-temp">Loading...</span></h1>
                          </div>
                        </div>
                    </div>
                </div>
                <div class="panel panel-primary">
                    <div class="panel-heading"> <h3 class="panel-title text-bold"><span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span> Kelembaban</h3></div>
                    <div class="panel-body">
                        <div class="progress">
                            <div id="pgbar-sensor" class="progress-bar progress-bar-danger progress-bar-striped active" role="progressbar"
                            aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%">
                            <h1>Kelembaban : <span id="data-hum">Loading...</span></h1>
                          </div>
                        </div>
                    </div>
                </div>
                <div class="panel panel-primary">
                    <div class="panel-heading"> <h3 class="panel-title text-bold"><span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span> Cahaya</h3></div>
                    <div class="panel-body">
                        <div class="progress">
                          <div id="pgbar-sensor" class="progress-bar progress-bar-danger progress-bar-striped active" role="progressbar"
                          aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%">
                          <h1>Cahaya : <span id="data-chy">Loading...</span></h1>
                          </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script src="bootstrap/js/bootstrap-toggle.min.js"></script>
    <script src="bootstrap/js/bootstrap-slider.min.js"></script>
    <h1><span id="status">Loading...</span></h1>
  </body>
</html>